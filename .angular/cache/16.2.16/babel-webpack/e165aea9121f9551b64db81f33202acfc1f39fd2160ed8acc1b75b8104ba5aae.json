{"ast":null,"code":"import { BehaviorSubject, Observable } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nexport class AuthService {\n  constructor(http, router) {\n    this.http = http;\n    this.router = router;\n    this.baseUrl = 'http://localhost:8080/auth'; // Replace with your backend URL\n    this.loggedIn = new BehaviorSubject(this.isTokenAvailable());\n  }\n  get isLoggedIn() {\n    return this.loggedIn.asObservable();\n  }\n  login(username, password) {\n    return new Observable(observer => {\n      this.http.post(`${this.baseUrl}/login`, {\n        username,\n        password\n      }).subscribe({\n        next: response => {\n          const token = response.token;\n          localStorage.setItem('authToken', token);\n          this.loggedIn.next(true);\n          observer.next(response);\n        },\n        error: error => {\n          observer.error(error);\n        }\n      });\n    });\n  }\n  // Logout method\n  logout() {\n    localStorage.removeItem('authToken');\n    this.loggedIn.next(false);\n    this.router.navigate(['/sign-in']); // Redirect to login page\n  }\n  // Check if token is available in localStorage\n  isTokenAvailable() {\n    return !!localStorage.getItem('authToken');\n  }\n  // Decode the JWT to extract information\n  getRole() {\n    const token = localStorage.getItem('authToken');\n    if (!token) return null;\n    const payload = JSON.parse(atob(token.split('.')[1]));\n    return payload.role; // Assuming the token contains a \"role\" claim\n  }\n\n  static {\n    this.ɵfac = function AuthService_Factory(t) {\n      return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Router));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: AuthService,\n      factory: AuthService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["BehaviorSubject","Observable","AuthService","constructor","http","router","baseUrl","loggedIn","isTokenAvailable","isLoggedIn","asObservable","login","username","password","observer","post","subscribe","next","response","token","localStorage","setItem","error","logout","removeItem","navigate","getItem","getRole","payload","JSON","parse","atob","split","role","i0","ɵɵinject","i1","HttpClient","i2","Router","factory","ɵfac","providedIn"],"sources":["/Users/andreaelopez/Desktop/Reynodance_Academy/reynodance-academy/src/app/auth.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n  private baseUrl = 'http://localhost:8080/auth'; // Replace with your backend URL\n  private loggedIn = new BehaviorSubject<boolean>(this.isTokenAvailable());\n\n  constructor(private http: HttpClient, private router: Router) {}  get isLoggedIn(): Observable<boolean> {\n    return this.loggedIn.asObservable();\n  }\n\n  login(username: string, password: string): Observable<any> {\n    return new Observable((observer) => {\n      this.http\n        .post(`${this.baseUrl}/login`, { username, password })\n        .subscribe({\n          next: (response: any) => {\n            const token = response.token;\n            localStorage.setItem('authToken', token);\n            this.loggedIn.next(true);\n            observer.next(response);\n          },\n          error: (error) => {\n            observer.error(error);\n          },\n        });\n    });\n  }\n\n  // Logout method\n  logout(): void {\n    localStorage.removeItem('authToken');\n    this.loggedIn.next(false);\n    this.router.navigate(['/sign-in']); // Redirect to login page\n  }\n\n  // Check if token is available in localStorage\n  private isTokenAvailable(): boolean {\n    return !!localStorage.getItem('authToken');\n  }\n\n  // Decode the JWT to extract information\n  getRole(): string | null {\n    const token = localStorage.getItem('authToken');\n    if (!token) return null;\n    const payload = JSON.parse(atob(token.split('.')[1]));\n    return payload.role; // Assuming the token contains a \"role\" claim\n  }\n}"],"mappings":"AAGA,SAASA,eAAe,EAAEC,UAAU,QAAQ,MAAM;;;;AAKlD,OAAM,MAAOC,WAAW;EAItBC,YAAoBC,IAAgB,EAAUC,MAAc;IAAxC,KAAAD,IAAI,GAAJA,IAAI;IAAsB,KAAAC,MAAM,GAANA,MAAM;IAH5C,KAAAC,OAAO,GAAG,4BAA4B,CAAC,CAAC;IACxC,KAAAC,QAAQ,GAAG,IAAIP,eAAe,CAAU,IAAI,CAACQ,gBAAgB,EAAE,CAAC;EAET;EAAG,IAAIC,UAAUA,CAAA;IAC9E,OAAO,IAAI,CAACF,QAAQ,CAACG,YAAY,EAAE;EACrC;EAEAC,KAAKA,CAACC,QAAgB,EAAEC,QAAgB;IACtC,OAAO,IAAIZ,UAAU,CAAEa,QAAQ,IAAI;MACjC,IAAI,CAACV,IAAI,CACNW,IAAI,CAAC,GAAG,IAAI,CAACT,OAAO,QAAQ,EAAE;QAAEM,QAAQ;QAAEC;MAAQ,CAAE,CAAC,CACrDG,SAAS,CAAC;QACTC,IAAI,EAAGC,QAAa,IAAI;UACtB,MAAMC,KAAK,GAAGD,QAAQ,CAACC,KAAK;UAC5BC,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEF,KAAK,CAAC;UACxC,IAAI,CAACZ,QAAQ,CAACU,IAAI,CAAC,IAAI,CAAC;UACxBH,QAAQ,CAACG,IAAI,CAACC,QAAQ,CAAC;QACzB,CAAC;QACDI,KAAK,EAAGA,KAAK,IAAI;UACfR,QAAQ,CAACQ,KAAK,CAACA,KAAK,CAAC;QACvB;OACD,CAAC;IACN,CAAC,CAAC;EACJ;EAEA;EACAC,MAAMA,CAAA;IACJH,YAAY,CAACI,UAAU,CAAC,WAAW,CAAC;IACpC,IAAI,CAACjB,QAAQ,CAACU,IAAI,CAAC,KAAK,CAAC;IACzB,IAAI,CAACZ,MAAM,CAACoB,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;EACtC;EAEA;EACQjB,gBAAgBA,CAAA;IACtB,OAAO,CAAC,CAACY,YAAY,CAACM,OAAO,CAAC,WAAW,CAAC;EAC5C;EAEA;EACAC,OAAOA,CAAA;IACL,MAAMR,KAAK,GAAGC,YAAY,CAACM,OAAO,CAAC,WAAW,CAAC;IAC/C,IAAI,CAACP,KAAK,EAAE,OAAO,IAAI;IACvB,MAAMS,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACZ,KAAK,CAACa,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrD,OAAOJ,OAAO,CAACK,IAAI,CAAC,CAAC;EACvB;;;;uBA5CW/B,WAAW,EAAAgC,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,MAAA;IAAA;EAAA;;;aAAXrC,WAAW;MAAAsC,OAAA,EAAXtC,WAAW,CAAAuC,IAAA;MAAAC,UAAA,EAFV;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}